<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foreclosure UI</title>
    <style>
      @font-face {
        font-family: "MinecraftTen";
        src: url("Strider.ttf") format("truetype");
      }

      .terminal::-webkit-scrollbar {
        width: 6px;
      }

      .terminal::-webkit-scrollbar-track {
        background: transparent;
      }

      .terminal::-webkit-scrollbar-thumb {
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background: linear-gradient(to right, #24243e, #302b63, #0f0c29);
        font-family: "MinecraftTen", monospace;
        color: white;
        height: 100vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
      }

      .main-content {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: filter 0.5s ease;
      }

      .main-content.blurred {
        filter: blur(8px);
        pointer-events: none;
      }

      .title {
        display: flex;
        gap: 2px;
        font-size: 6rem;
        font-weight: 900;
        margin-top: 60px;
        margin-bottom: 20px;
      }

      .letter {
        background: white;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: bold;
        font-size: 4.5rem;
      }

      #terminal,
      #terminal * {
        font-family: "Segoe UI Emoji", "Noto Color Emoji", "Apple Color Emoji",
          "Segoe UI Symbol", sans-serif !important;
      }

      .terminal {
        width: 97%;
        height: 100%;
        background: rgba(255, 255, 255, 0.05);
        --webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 2rem;
        line-height: 1.8;
        overflow-y: auto;
        font-size: 1rem;
        color: hsl(0, 0%, 100%);
        white-space: pre-wrap;
        font-family: "Fira Code", monospace;
        font-weight: bold;
      }

      .terminal-char {
        display: inline-block;
        white-space: pre;
      }

      /* VPN Overlay */
      .vpn-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        --webkit-backdrop-filter: blur(10px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 1s ease;
      }

      .vpn-overlay.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .status-text {
        margin-top: 2rem;
        font-size: 1.5rem;
        text-align: center;
      }

      .download-section .cssbuttons-io-button {
        display: flex;
        align-items: center;
        font-family: inherit;
        cursor: pointer;
        font-weight: 500;
        font-size: 17px;
        padding: 0.8em 1.5em 0.8em 1.2em;
        color: white;
        background: #ad5389;
        background: linear-gradient(
          0deg,
          rgba(77, 54, 208, 1) 0%,
          rgba(132, 116, 254, 1) 100%
        );
        border: none;
        box-shadow: 0 0.7em 1.5em -0.5em #4d36d0be;
        letter-spacing: 0.05em;
        border-radius: 20em;
      }

      .download-section .cssbuttons-io-button svg {
        margin-right: 8px;
      }

      .download-section .cssbuttons-io-button:hover {
        box-shadow: 0 0.5em 1.5em -0.5em #4d36d0be;
      }

      .download-section .cssbuttons-io-button:active {
        box-shadow: 0 0.3em 1em -0.5em #4d36d0be;
      }

      .upgrade-banner {
        display: none;
        background: rgba(36, 36, 62, 0.95);
        color: white;
        padding: 1rem 2rem;
        justify-content: space-between;
        align-items: center;
        font-family: "MinecraftTen", monospace;
        font-size: 1.2rem;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
        z-index: 10001;
        width: 80%;
        max-width: 800px;
        border-radius: 10px;
        position: absolute;
        top: 5%;
        left: 50%;
        transform: translateX(-50%);
        gap: 1rem;
        animation: slideDown 0.4s ease-in-out forwards;
      }

      /* Vpn Over Animation */
      .earth-loader {
        --watercolor: #3344c1;
        --landcolor: #7cc133;
        width: 7.5em;
        height: 7.5em;
        background-color: var(--watercolor);
        position: relative;
        overflow: hidden;
        border-radius: 50%;
        box-shadow: inset 0em 0.5em rgb(255, 255, 255, 0.25),
          inset 0em -0.5em rgb(0, 0, 0, 0.25);
        border: solid 0.15em white;
        animation: startround 1s;
        animation-iteration-count: 1;
      }

      .earth p {
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        padding-top: 0.25em;
        font-size: 1.25em;
        font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
      }

      .earth-loader svg:nth-child(1) {
        position: absolute;
        bottom: -2em;
        width: 7em;
        height: auto;
        animation: round1 5s infinite linear 0.75s;
      }

      .earth-loader svg:nth-child(2) {
        position: absolute;
        top: -3em;
        width: 7em;
        height: auto;
        animation: round1 5s infinite linear;
      }
      .earth-loader svg:nth-child(3) {
        position: absolute;
        top: -2.5em;
        width: 7em;
        height: auto;
        animation: round2 5s infinite linear;
      }
      .earth-loader svg:nth-child(4) {
        position: absolute;
        bottom: -2.2em;
        width: 7em;
        height: auto;
        animation: round2 5s infinite linear 0.75s;
      }

      @keyframes startround {
        0% {
          filter: brightness(500%);
          box-shadow: none;
        }
        75% {
          filter: brightness(500%);
          box-shadow: none;
        }
        100% {
          filter: brightness(100%);
          box-shadow: inset 0em 0.5em rgb(255, 255, 255, 0.25),
            inset 0em -0.5em rgb(0, 0, 0, 0.25);
        }
      }

      @keyframes round1 {
        0% {
          left: -2em;
          opacity: 100%;
          transform: skewX(0deg) rotate(0deg);
        }
        30% {
          left: -6em;
          opacity: 100%;
          transform: skewX(-25deg) rotate(25deg);
        }
        31% {
          left: -6em;
          opacity: 0%;
          transform: skewX(-25deg) rotate(25deg);
        }
        35% {
          left: 7em;
          opacity: 0%;
          transform: skewX(25deg) rotate(-25deg);
        }
        45% {
          left: 7em;
          opacity: 100%;
          transform: skewX(25deg) rotate(-25deg);
        }
        100% {
          left: -2em;
          opacity: 100%;
          transform: skewX(0deg) rotate(0deg);
        }
      }

      @keyframes round2 {
        0% {
          left: 5em;
          opacity: 100%;
          transform: skewX(0deg) rotate(0deg);
        }
        75% {
          left: -7em;
          opacity: 100%;
          transform: skewX(-25deg) rotate(25deg);
        }
        76% {
          left: -7em;
          opacity: 0%;
          transform: skewX(-25deg) rotate(25deg);
        }
        77% {
          left: 8em;
          opacity: 0%;
          transform: skewX(25deg) rotate(-25deg);
        }
        80% {
          left: 8em;
          opacity: 100%;
          transform: skewX(25deg) rotate(-25deg);
        }
        100% {
          left: 5em;
          opacity: 100%;
          transform: skewX(0deg) rotate(0deg);
        }
      }
    </style>
  </head>

  <body>
    <div id="upgrade-banner" class="upgrade-banner">
      <div class="upgrade-text">A new version is available!</div>
      <div class="download-section">
        <button
          class="cssbuttons-io-button"
          onclick="window.open('https://github.com/Tariqv/US-FL-County-Foreclosure-Sale-Scraper/releases/latest')"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="24"
            height="24"
          >
            <path fill="none" d="M0 0h24v24H0z"></path>
            <path
              fill="currentColor"
              d="M1 14.5a6.496 6.496 0 0 1 3.064-5.519 8.001 8.001 0 0 1 15.872 0 6.5 6.5 0 0 1-2.936 12L7 21c-3.356-.274-6-3.078-6-6.5zm15.848 4.487a4.5 4.5 0 0 0 2.03-8.309l-.807-.503-.12-.942a6.001 6.001 0 0 0-11.903 0l-.12.942-.805.503a4.5 4.5 0 0 0 2.029 8.309l.173.013h9.35l.173-.013zM13 12h3l-4 5-4-5h3V8h2v4z"
            ></path>
          </svg>
          <span>Upgrade</span>
        </button>
      </div>
    </div>

    <div id="vpn-overlay" class="vpn-overlay">
      <div class="earth">
        <div class="earth-loader">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <path
              transform="translate(100 100)"
              d="M29.4,-17.4C33.1,1.8,27.6,16.1,11.5,31.6C-4.7,47,-31.5,63.6,-43,56C-54.5,48.4,-50.7,16.6,-41,-10.9C-31.3,-38.4,-15.6,-61.5,-1.4,-61C12.8,-60.5,25.7,-36.5,29.4,-17.4Z"
              fill="#7CC133"
            ></path>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <path
              transform="translate(100 100)"
              d="M31.7,-55.8C40.3,-50,45.9,-39.9,49.7,-29.8C53.5,-19.8,55.5,-9.9,53.1,-1.4C50.6,7.1,43.6,14.1,41.8,27.6C40.1,41.1,43.4,61.1,37.3,67C31.2,72.9,15.6,64.8,1.5,62.2C-12.5,59.5,-25,62.3,-31.8,56.7C-38.5,51.1,-39.4,37.2,-49.3,26.3C-59.1,15.5,-78,7.7,-77.6,0.2C-77.2,-7.2,-57.4,-14.5,-49.3,-28.4C-41.2,-42.4,-44.7,-63,-38.5,-70.1C-32.2,-77.2,-16.1,-70.8,-2.3,-66.9C11.6,-63,23.1,-61.5,31.7,-55.8Z"
              fill="#7CC133"
            ></path>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <path
              transform="translate(100 100)"
              d="M30.6,-49.2C42.5,-46.1,57.1,-43.7,67.6,-35.7C78.1,-27.6,84.6,-13.8,80.3,-2.4C76.1,8.9,61.2,17.8,52.5,29.1C43.8,40.3,41.4,53.9,33.7,64C26,74.1,13,80.6,2.2,76.9C-8.6,73.1,-17.3,59,-30.6,52.1C-43.9,45.3,-61.9,45.7,-74.1,38.2C-86.4,30.7,-92.9,15.4,-88.6,2.5C-84.4,-10.5,-69.4,-20.9,-60.7,-34.6C-52.1,-48.3,-49.8,-65.3,-40.7,-70C-31.6,-74.8,-15.8,-67.4,-3.2,-61.8C9.3,-56.1,18.6,-52.3,30.6,-49.2Z"
              fill="#7CC133"
            ></path>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <path
              transform="translate(100 100)"
              d="M39.4,-66C48.6,-62.9,51.9,-47.4,52.9,-34.3C53.8,-21.3,52.4,-10.6,54.4,1.1C56.3,12.9,61.7,25.8,57.5,33.2C53.2,40.5,39.3,42.3,28.2,46C17,49.6,8.5,55.1,1.3,52.8C-5.9,50.5,-11.7,40.5,-23.6,37.2C-35.4,34,-53.3,37.5,-62,32.4C-70.7,27.4,-70.4,13.7,-72.4,-1.1C-74.3,-15.9,-78.6,-31.9,-73.3,-43C-68.1,-54.2,-53.3,-60.5,-39.5,-60.9C-25.7,-61.4,-12.9,-56,1.1,-58C15.1,-59.9,30.2,-69.2,39.4,-66Z"
              fill="#7CC133"
            ></path>
          </svg>
        </div>
      </div>
      <div id="vpn-status" class="status-text"></div>
    </div>

    <div id="main-content" class="main-content blurred">
      <div class="title">
        <span class="letter">F</span>
        <span class="letter">L</span>
        <span class="letter">O</span>
        <span class="letter">R</span>
        <span class="letter">I</span>
        <span class="letter">D</span>
        <span class="letter">A</span>
        <span class="letter">&nbsp;</span>
        <span class="letter">F</span>
        <span class="letter">O</span>
        <span class="letter">R</span>
        <span class="letter">E</span>
        <span class="letter">C</span>
        <span class="letter">L</span>
        <span class="letter">O</span>
        <span class="letter">S</span>
        <span class="letter">U</span>
        <span class="letter">R</span>
        <span class="letter">E</span>
      </div>

      <div class="terminal" id="terminal"></div>
    </div>

    <script>
      const currentVersion = "v1.2";
      fetch(
        "https://api.github.com/repos/Tariqv/US-FL-County-Foreclosure-Sale-Scraper/releases/latest"
      )
        .then((res) => res.json())
        .then((data) => {
          const latestVersion = data.tag_name;
          if (latestVersion !== currentVersion) {
            document.getElementById("upgrade-banner").style.display = "flex";
          }
        })
        .catch((err) => console.error("Failed to fetch version info", err));
    </script>

    <script>
      (function () {
        let queue = [];
        let writing = false;
        const terminal = document.getElementById("terminal");

        window.enqueueText = function (text) {
          const chars = Array.from(text); // emoji safe
          for (let c of chars) queue.push(c);
          processQueue();
        };

        function appendChar(c) {
          const span = document.createElement("span");
          span.classList.add("terminal-char");
          span.innerHTML = c === " " ? "&nbsp;" : c;
          terminal.appendChild(span);
        }

        function processQueue() {
          if (writing || queue.length === 0) return;

          writing = true;
          const char = queue.shift();

          if (char === "\n") {
            terminal.appendChild(document.createElement("br"));
          } else {
            appendChar(char);
          }

          terminal.scrollTop = terminal.scrollHeight;

          setTimeout(() => {
            writing = false;
            processQueue();
          }, 14);
        }

        window.streamFull = function (text) {
          for (let c of Array.from(text)) {
            if (c === "\n") terminal.appendChild(document.createElement("br"));
            else appendChar(c);
          }
          terminal.scrollTop = terminal.scrollHeight;
        };
      })();
    </script>

    <script>
      let dots = 0;
      let statusInterval;

      window.startVpnStatus = function () {
        const vpnEl = document.getElementById("vpn-status");
        vpnEl.style.visibility = "visible";
        dots = 0;
        statusInterval = setInterval(() => {
          vpnEl.textContent = "Checking VPN" + ".".repeat(dots % 4);
          dots++;
        }, 400);
      };

      window.vpnFail = function () {
        clearInterval(statusInterval);
        document.getElementById("vpn-status").textContent =
          "Please connect US VPN";
      };

      window.vpnSuccess = function () {
        clearInterval(statusInterval);
        document.getElementById("vpn-overlay").classList.add("hidden");
        document.getElementById("main-content").classList.remove("blurred");
      };
    </script>
  </body>
</html>
